<!DOCTYPE html>
<html
    xmlns="http://www.w3.org/1999/xhtml"
    xml:lang="en"
    lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="description" content="" />
    <meta name="keywords" content="PHPMD, PMD, Project Mess Detection, Design, Maintenance, Quality Assurence, Violations, Reporting" />
    <meta name="author" content="Manuel Pichler" />
    <meta name="language" content="en" />
    <meta name="date" content="Thu, 24 Jun 2021 13:58:45 +0000" />
    <meta name="robots" content="all" />

    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
    <meta name="DC.title" content="About" />
    <meta name="DC.creator" content="Manuel Pichler" />
    <meta name="DC.date" content="Thu, 24 Jun 2021 13:58:45 +0000" />
    <meta name="DC.rights" content="BSD 3-Clause" />

    <link rel="icon" href="/favicon.ico" type="image/x-icon" />

    <link rel="Stylesheet" type="text/css" href="/css/screen.css" media="screen" />
    <link rel="Stylesheet" type="text/css" href="/css/print.css" media="print" />

    <title>PHPMD - PHP Mess Detector</title>
</head>
<body>
<h1>
    <a href="/">PHPMD - PHP Mess Detector</a>
</h1>
<div id="content">
    <hr />
<a id="command-line-usage"></a>
<h2>Command line usage</h2>
<p>Type phpmd [filename|directory] [report format] [ruleset file], i.e: :</p>
<pre><code class="">mapi@arwen ~ $ phpmd PHP/Depend/DbusUI/ xml rulesets/codesize.xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;pmd version=&quot;0.0.1&quot; timestamp=&quot;2009-12-19T22:17:18+01:00&quot;&gt;
  &lt;file name=&quot;/projects/pdepend/PHP/Depend/DbusUI/ResultPrinter.php&quot;&gt;
    &lt;violation beginline=&quot;67&quot;
               endline=&quot;224&quot;
               rule=&quot;TooManyMethods&quot;
               ruleset=&quot;Code Size Rules&quot;
               package=&quot;PHP_Depend\DbusUI&quot;
               class=&quot;PHP_Depend_DbusUI_ResultPrinter&quot;
               priority=&quot;3&quot;&gt;
      This class has too many methods, consider refactoring it.
    &lt;/violation&gt;
  &lt;/file&gt;
&lt;/pmd&gt;
</code></pre>
<p>You can pass a file name or a directory name containing PHP source
code to PHPMD.</p>
<p>The PHPMD Phar distribution includes the rule set files inside
its archive, even if the &quot;rulesets/codesize.xml&quot; parameter above looks
like a filesystem reference.</p>
<a id="command-line-options"></a>
<h2>Command line options</h2>
<ul><li class="dash">Notice that the default output is in XML, so you can redirect it to
  a file and XSLT it or whatever</li>
<li class="dash">You can also use shortened names to refer to the built-in rule sets,
  like this: ::
    phpmd PHP/Depend/DbusUI/ xml codesize</li>
<li class="dash">The command line interface also accepts the following optional arguments:</li>
<ul><li class="dash"><code>--minimumpriority</code> <code>--min-priority</code> <code>--minimum-priority</code> - The rule priority threshold; rules with lower
    priority than they will not be used.</li>
<li class="dash"><code>--maximumpriority</code> <code>--max-priority</code> <code>--maximum-priority</code> - The rule priority threshold; rules with higher
    priority than this will not be used.</li>
<li class="dash"><code>--reportfile</code> <code>--report-file</code> - Sends the report output to the specified file,
    instead of the default output target <code>STDOUT</code>.</li>
<li class="dash"><code>--suffixes</code> - Comma-separated string of valid source code filename
    extensions, e.g. php, phtml.</li>
<li class="dash"><code>--exclude</code> - Comma-separated string of patterns that are used to ignore
    directories. Use asterisks to exclude by pattern. For example <code>*src/foo/*.php</code> or <code>*src/foo/*</code></li>
<li class="dash"><code>--strict</code> - Also report those nodes with a @SuppressWarnings annotation.</li>
<li class="dash"><code>--not-strict</code> - Does not report those nodes with a @SuppressWarnings annotation.</li>
<li class="dash"><code>--ignore-errors-on-exit</code> - will exit with a zero code, even on error.</li>
<li class="dash"><code>--ignore-violations-on-exit</code> - will exit with a zero code, even if any
    violations are found.</li>
<li class="dash"><code>--generate-baseline</code> - will generate a <code>phpmd.baseline.xml</code> for existing violations
    next to the ruleset definition file.</li>
<li class="dash"><code>--update-baseline</code> - will remove all violations from an existing <code>phpmd.baseline.xml</code>
    that no longer exist. New violations will _<a href="">not</a> be added.</li>
<li class="dash"><code>--baseline-file</code> - the filepath to a custom baseline xml file. The filepath
    of all baselined files must be relative to this file location.
  An example command line: ::
    phpmd PHP/Depend/DbusUI xml codesize --reportfile phpmd.xml --suffixes php,phtml</li>
</ul>
</ul>

<a id="using-multiple-rule-sets"></a>
<h4>Using multiple rule sets</h4>
<p>PHPMD uses so called rule sets that configure/define a set of rules which will
be applied against the source under test. The default distribution of PHPMD is
already shipped with a few default sets, that can be used out-of-box. You can
call PHPMD's cli tool with a set's name to apply this configuration: :</p>
<pre><code class="">~ $ phpmd /path/to/source text codesize
</code></pre>
<p>But what if you would like to apply more than one rule set against your source?
You can also pass a list of rule set names, separated by comma to PHPMD's cli
tool: :</p>
<pre><code class="">~ $ phpmd /path/to/source text codesize,unusedcode,naming
</code></pre>
<p>You can also mix custom <a href="/documentation/creating-a-ruleset.html">rule set files</a> with build-in rule sets: :</p>
<pre><code class="">~ $ phpmd /path/to/source text codesize,/my/rules.xml
</code></pre>
<p>That's it. With this behavior you can specify you own combination of rule sets
that will check the source code.</p>
<a id="exit-codes"></a>
<h2>Exit codes</h2>
<p>PHPMD's command line tool currently defines four different exit codes.</p>
<ul><li class="dash"><em>0</em>, This exit code indicates that everything worked as expected. This means
  there was no error/exception and PHPMD hasn't detected any rule violation
  in the code under test.</li>
<li class="dash"><em>1</em>, This exit code indicates that an exception occurred which has
  interrupted PHPMD during execution.</li>
<li class="dash"><em>2</em>, This exit code means that PHPMD has processed the code under test
  without the occurrence of an error/exception, but it has detected rule
  violations in the analyzed source code. You can also prevent this behaviour
  with the <code>--ignore-violations-on-exit</code> flag, which will result to a <em>0</em>
  even if any violations are found.</li>
<li class="dash"><em>3</em>, This exit code means that one or multiple files under test could not
   be processed because of an error. There may also be violations in other
   files that could be processed correctly.</li>
</ul>

<a id="renderers"></a>
<h2>Renderers</h2>
<p>At the moment PHPMD comes with the following five renderers:</p>
<ul><li class="dash"><em>xml</em>, which formats the report as XML.</li>
<li class="dash"><em>text</em>, simple textual format.</li>
<li class="dash"><em>ansi</em>, colorful, formatted text for the command line.</li>
<li class="dash"><em>html</em>, single HTML file with possible problems.</li>
<li class="dash"><em>json</em>, formats JSON report.</li>
<li class="dash"><em>github</em>, a format that GitHub Actions understands (see <a href="/documentation/ci-integration.html#github-actions">CI Integration</a>).</li>
</ul>

<p>Some more formats can be obtained by conversion such as:</p>
<p><em>junit</em> can be obtained using <a href="https://phpmd.org/junit.xslt">xsltproc` package on the Debian-based systems or `libxslt` on Alpine and CentOS. with this given `junit.xslt config file</a>:</p>
<pre><code class="">~ $ phpmd src xml cleancode | xsltproc junit.xslt -
</code></pre>
<a id="baseline"></a>
<h2>Baseline</h2>
<p>For existing projects a violation baseline can be generated. All violations in this baseline will be ignored in further inspections.</p>
<p>The recommended approach would be a <code>phpmd.xml</code> in the root of the project. To generate the phpmd.baseline.xml next to it:</p>
<pre><code class="">~ $ phpmd /path/to/source text phpmd.xml --generate-baseline
</code></pre>
<p>To specify a custom baseline filepath for export:</p>
<pre><code class="">~ $ phpmd /path/to/source text phpmd.xml --generate-baseline --baseline-file /path/to/source/phpmd.baseline.xml
</code></pre>
<p>By default PHPMD will look next to <code>phpmd.xml</code> for <code>phpmd.baseline.xml</code>. To overwrite this behaviour:</p>
<pre><code class="">~ $ phpmd /path/to/source text phpmd.xml --baseline-file /path/to/source/phpmd.baseline.xml
</code></pre>
<p>To clean up an existing baseline file and <em>only remove</em> no longer existing violations:</p>
<pre><code class="">~ $ phpmd /path/to/source text phpmd.xml --update-baseline
</code></pre>
</div>

<div id="navigation">
    <h2>Overview</h2>
    <ul>
        <li><a href="/about.html" title="About">About</a></li><li><a href="/documentation/index.html" title="Documentation"><strong>Documentation</strong></a><ul><li><a href="/documentation/suppress-warnings.html" title="Suppress warnings">Suppress warnings</a><li><a href="/documentation/ci-integration.html" title="CI Integration">CI Integration</a><li><a href="/documentation/writing-a-phpmd-rule.html" title="Writing a PHPMD Rule">Writing a PHPMD Rule</a><li><a href="/documentation/creating-a-ruleset.html" title="Creating a rule set">Creating a rule set</a><li><a href="/documentation/ant-task.html" title="Ant task usage">Ant task usage</a></ul></li><li><a href="/rules/index.html" title="Rules">Rules</a></li><li><a href="/download/index.html" title="Download">Download</a></li><li><a href="/people-behind.html" title="People behind">People behind</a></li><li><a href="/support/index.html" title="Support &amp; Contact">Support &amp; Contact</a></li><li><a href="/for-enterprise.html" title="For Enterprise">For Enterprise</a></li>    </ul>
</div>

<div id="footer">
    By <strong>Manuel Pichler</strong>
    licensed under <a href="https://opensource.org/licenses/bsd-license.php" title="BSD 3-Clause">BSD 3-Clause</a>
</div>

<div id="formats">
        <a href="https://raw.githubusercontent.com/phpmd/phpmd/master/src/site/rst/documentation/index.rst">Source</a>
    |
    <a href="https://github.com/phpmd/phpmd/edit/master/src/site/rst/documentation/index.rst">Edit</a>
</div>

<script>
    [].forEach.call(document.querySelectorAll('pre > code'), function (code) {
        code.className += ' block';
    });
</script>
</body>
</html>
