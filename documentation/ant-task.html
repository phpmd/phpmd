<!DOCTYPE html>
<html
    xmlns="http://www.w3.org/1999/xhtml"
    xml:lang="en"
    lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="description" content="" />
    <meta name="keywords" content="PHPMD, PMD, Project Mess Detection, Design, Maintenance, Quality Assurence, Violations, Reporting" />
    <meta name="author" content="Manuel Pichler" />
    <meta name="language" content="en" />
    <meta name="date" content="Tue, 19 Mar 2024 16:15:10 +0000" />
    <meta name="robots" content="all" />

    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
    <meta name="DC.title" content="About" />
    <meta name="DC.creator" content="Manuel Pichler" />
    <meta name="DC.date" content="Tue, 19 Mar 2024 16:15:10 +0000" />
    <meta name="DC.rights" content="BSD 3-Clause" />

    <link rel="icon" href="/favicon.ico" type="image/x-icon" />

    <link rel="Stylesheet" type="text/css" href="/css/screen.css" media="screen" />
    <link rel="Stylesheet" type="text/css" href="/css/print.css" media="print" />

    <title>PHPMD - PHP Mess Detector</title>
</head>
<body>
<h1>
    <a href="/">PHPMD - PHP Mess Detector</a>
</h1>
<div id="content">
    <hr />
<a id="phpmd-ant-task-usage"></a>
<h2>PHPMD ant task usage</h2>
<p>To ease the usage of PHPMD in your build process we provide an <a href="http://ant.apache.org/manual/targets.html">ant task</a>
that integrates PHPMD into the <a href="http://ant.apache.org/">ant</a> build tool. The ant task jar file can
be found in the <a href="/download/extensions#ant-task">download</a> section of the PHPMD homepage.</p>
<p>To make the task available in your ant build file you have two options.
The first option is to copy or link the <code>*.jar</code> file into the <code>lib</code>
directory of your ant installation. :</p>
<pre><code class="">mapi@arwen ~ $ wget \
     https://phpmd.org/download/extensions/ant-<a href="https://github.com/phpmd/phpmd/releases/tag/0.1.0.jar" title="phpmd-0.1.0.jar release">phpmd-0.1.0.jar</a>
...
mapi@arwen ~ $ ln -s ~/ant-<a href="https://github.com/phpmd/phpmd/releases/tag/0.1.0.jar" title="phpmd-0.1.0.jar release">phpmd-0.1.0.jar</a> /opt/ant/lib/ant-phpmd.jar
</code></pre>
<p>The second option is to call ant with the command line switch <code>-lib</code> :</p>
<pre><code class="">mapi@arwen ~ $ ant -lib ant-<a href="https://github.com/phpmd/phpmd/releases/tag/0.1.0.jar" title="phpmd-0.1.0.jar release">phpmd-0.1.0.jar</a>
</code></pre>
<p>Now we can start using PHPMD in our ant <code>build.xml</code> file by adding
a task definition that informs ant about the new task and registers
it with a custom identifier. :</p>
<pre><code class="">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;project name=&quot;phpmd.example&quot; default=&quot;example&quot; basedir=&quot;.&quot;&gt;

    &lt;taskdef name=&quot;phpmd&quot; classname=&quot;org.phpmd.ant.PHPMDTask&quot;/&gt;

&lt;/project&gt;
</code></pre>
<p>Now the PHPMD task can be called through an xml element named <code>&lt;phpmd /&gt;</code>
in this build: :</p>
<pre><code class="">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project name=&quot;phpmd.example&quot; default=&quot;example&quot; basedir=&quot;.&quot;&gt;

    &lt;taskdef name=&quot;phpmd&quot; classname=&quot;org.phpmd.ant.PHPMDTask&quot;/&gt;

    &lt;target name=&quot;example&quot;&gt;
        &lt;phpmd rulesetfiles=&quot;unusedcode&quot; failonerror=&quot;off&quot;&gt;
            &lt;formatter type=&quot;xml&quot; toFile=&quot;${basedir}/pmd.xml&quot; /&gt;
            &lt;fileset dir=&quot;${basedir}/PHPMD&quot;&gt;
                &lt;include name=&quot;*.php&quot; /&gt;
            &lt;/fileset&gt;
        &lt;/phpmd&gt;
    &lt;/target&gt;

&lt;/project&gt;
</code></pre>
<a id="parameters"></a>
<h2>Parameters</h2>
<p>The following attributes can be defined on the PHPMD task xml-element.</p>
<table><tr><th>Attribute</th><th>Description</th><th>Required</th></tr><tr><td>rulesetfiles</td><td>A comma delimited list of ruleset files ('rulesets/basic.xml,rulesets/design.xml') or identifiers of build-in rulesets.</td><td>Yes, unless the ruleset nested element is used</td></tr><tr><td>failonerror</td><td>Whether or not to fail the build if any errors occur while processing the files</td><td>No</td></tr><tr><td>failOnRuleViolation</td><td>Whether or not to fail the build if PHPMD finds any problems</td><td>No</td></tr><tr><td>minimumPriority</td><td>The rule priority threshold; rules with lower priority than they will not be used</td><td>No</td></tr><tr><td>maximumPriority</td><td>The rule priority threshold; rules with higher priority than this will not be used</td><td>No</td></tr></table>
<a id="nested-xml-elements"></a>
<h2>Nested xml elements</h2>
<p>The <code>&lt;formatter /&gt;</code> specifies the format of and the output file to
which the report is written.</p>
<p><strong>Parameters</strong></p>
<table><tr><th>Attribute</th><th>Description</th><th>Required</th></tr><tr><td>format</td><td>The report output format. Supported formats are xml,html and text.</td><td>Yes</td></tr><tr><td>toFile</td><td>A filename into which the report is written</td><td>Yes</td></tr></table>
<p>The <code>&lt;ruleset /&gt;</code> xml element is another way to specify rulesets. Here
is a modified version of the previous example: :</p>
<pre><code class="">&lt;target name=&quot;example&quot;&gt;
    &lt;phpmd failonerror=&quot;off&quot;&gt;
        &lt;formatter type=&quot;text&quot; toFile=&quot;${basedir}/pmd.xml&quot; /&gt;
        &lt;ruleset&gt;unusedcode&lt;/ruleset&gt;
        &lt;ruleset&gt;codesize&lt;/ruleset
        &lt;fileset dir=&quot;${basedir}/PHPMD&quot;&gt;
            &lt;include name=&quot;*.php&quot; /&gt;
        &lt;/fileset&gt;
    &lt;/phpmd&gt;
&lt;/target&gt;
</code></pre>
<a id="postprocessing-the-report-file-with-xslt"></a>
<h2>Postprocessing the report file with XSLT</h2>
<p>There are several XSLT scripts which can be used to transform the XML
report into some nice html pages. To do this, make sure you use the
XML formatter in the PHPMD task invocation, i.e.: :</p>
<pre><code class="">&lt;formatter type=&quot;xml&quot; toFile=&quot;${builddir}/~report.xml&quot;/&gt;
</code></pre>
<p>Then, after the end of the PHPMD task, do this: :</p>
<pre><code class="">&lt;xslt in=&quot;${builddir}/~report.xml&quot;
      style=&quot;${basedir}/report.xslt&quot;
      out=&quot;${reportdir}/report.html&quot; /&gt;
</code></pre>
</div>

<div id="navigation">
    <h2>Overview</h2>
    <ul>
        <li><a href="/about.html" title="About">About</a></li><li><a href="/documentation/index.html" title="Documentation"><strong>Documentation</strong></a><ul><li><a href="/documentation/suppress-warnings.html" title="Suppress warnings">Suppress warnings</a><li><a href="/documentation/ci-integration.html" title="CI Integration">CI Integration</a><li><a href="/documentation/writing-a-phpmd-rule.html" title="Writing a PHPMD Rule">Writing a PHPMD Rule</a><li><a href="/documentation/creating-a-ruleset.html" title="Creating a rule set">Creating a rule set</a><li><a href="/documentation/ant-task.html" title="Ant task usage"><strong>Ant task usage</strong></a></ul></li><li><a href="/rules/index.html" title="Rules">Rules</a></li><li><a href="/download/index.html" title="Download">Download</a></li><li><a href="/people-behind.html" title="People behind">People behind</a></li><li><a href="/support/index.html" title="Support &amp; Contact">Support &amp; Contact</a></li><li><a href="/for-enterprise.html" title="For Enterprise">For Enterprise</a></li>    </ul>
</div>

<div id="footer">
    By <strong>Manuel Pichler</strong>
    licensed under <a href="https://opensource.org/licenses/bsd-license.php" title="BSD 3-Clause">BSD 3-Clause</a>

    <span class="follow">
        <a href="https://twitter.com/php_pmd" title="Follow on Twitter" class="twitter-follow" target="_blank">
            <i></i> Follow @PHP_PMD
        </a>
        <a rel="me" href="https://phpc.social/@phpmd" title="Follow on Mastodon" class="mastodon-follow" target="_blank">
            <i></i> Follow @phpmd@phpc.social
        </a>
    </span>
</div>

<div id="formats">
        <a href="https://raw.githubusercontent.com/phpmd/phpmd/master/src/site/rst/documentation/ant-task.rst">Source</a>
    |
    <a href="https://github.com/phpmd/phpmd/edit/master/src/site/rst/documentation/ant-task.rst">Edit</a>
</div>

<script>
    [].forEach.call(document.querySelectorAll('pre > code'), function (code) {
        code.className += ' block';
    });
</script>
</body>
</html>
